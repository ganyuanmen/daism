#!/bin/bash

# 生成 AES-GCM Key
AES_KEY=$(head -c 32 /dev/urandom | base64)

# 构建镜像
docker build --no-cache \
  --build-arg NEXT_SERVER_ACTIONS_ENCRYPTION_KEY="$AES_KEY" \
  --build-arg NEXT_PUBLIC_DOMAIN="daism.io" \
  --build-arg NEXT_PUBLIC_BLOCKCHAIN_NETWORK="mainnet" \
  --build-arg NEXT_PUBLIC_HTTPS_URL="https://mainnet.infura.io/v3/2e68e4d6017344cd89bab57981783954" \
  --build-arg NEXT_PUBLIC_ADMI_ACTOR="0xB39D48f4167519ADa7a769875966907189CA13E2" \
  --build-arg NEXT_PUBLIC_SITEMANAGER="0xFC2C722b8fe7B3Ca277D349Cbad6D2c5ce2eCF9C" \
  --build-arg NEXT_PUBLIC_TOTAL="4096" \
  --build-arg NEXT_PUBLIC_SCREGISTRAR="0xdFBF69B7E5366FB3001C9a214dd85c5FE3f90bAe" \
  --build-arg NEXT_PUBLIC_IADD="0xe7BCC24685B1E7898F72DEDE87A43Ccb00535fBC" \
  --build-arg NEXT_PUBLIC_UNITTOKEN="0xe40b05570d2760102c59bF4ffc9b47f921B67a1F" \
  --build-arg NEXT_PUBLIC_SCTOKEN="0x1Aca8f89aDb28d32D38D568A3DDC00a2424B60c9" \
  --build-arg NEXT_PUBLIC_COMMULATE="0x5535Cd4c4C395F4c1E069Fc3ef07436996F5F251" \
  --build-arg NEXT_PUBLIC_SC="0x2661142b4E499c870144d3aF936Cf634775F9808" \
  --build-arg NEXT_PUBLIC_UNITNFT="0xf9b6Ed3C56387085d6949d884F71d30D955402Ef" \
  --build-arg NEXT_PUBLIC_DAISMDOMAIN="0xbe930F53983c8822D1d8f970fc71081af78Ad3f6" \
  --build-arg NEXT_PUBLIC_DAISMNFT="0x287CcB7533e7c911244467635596E039C0960ac9" \
  --build-arg NEXT_PUBLIC_DAISMSINGLENFT="0xaB0f69add0FEfB649a541DA4eFAD1e8879Ba2819" \
  --build-arg NEXT_PUBLIC_DAiSMIADDPROXY="0xf856be785189329dE0B89d72CE0F9Af9A3Fd2d43" \
  --build-arg NEXT_PUBLIC_DONATION="0x9E84d3DEfC7c4D333620ff5aa61a900f6AD42CEA" \
  -t daismapp:latest \
  -f prod.Dockerfile .

docker tag daismapp:latest fhtcgym123/daismapp:latest
docker push fhtcgym123/daismapp:latest
